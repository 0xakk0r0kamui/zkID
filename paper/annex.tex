%% NOTES ON WHAT ABOUT EUDI TO INCLUDE HERE FROM THE MAIN PAPER:

% - Throughout this discussion, we continue to refer to EUDI's Wallet User as the ``Prover'', the Relying Party as the ``Verifier'', and the EUDI Attestation Authority (EAA) that acts as a PID/Attestation Prover as the ``Issuer''.
% - It accommodates SD-JWT and ISO/IEC 18013-5 mDL so that wallets and relying parties retain current disclosure grammars and parsing logic. 
% - The design aligns with Annex 2 format expectations (see Section \ref{sec:annex}), requires no changes to Issuers, supports current PKI deployments, and separates fixed from presentation-specific work to keep live presentation costs low. 
% - It avoids pairing-based assumptions and a universal setup, and leaves a path to future cryptographic upgrades without disrupting wallet or Issuer operations.

% For full details, check the eudi_application.tex file. I personally think you can kindof just copy-paste the whole thing into here, above the tables.


In this Appendix, we address all of the Topics presented in Annex 2 of the EUDI Architecture Reference Framework. 
The first part of this section is addressed to a general audience; it translates the vocabulary used in the EUDI ARF to cryptographic terms that those reading this paper might be familiar with.

We then present some additional directions for our proof-of-concept that introduces potential solutions to some of the Topics (requirements) in the EUDI ARF.
Finally, we lay out an exhaustive table addressing each of the Topics of the ARF, indicating:
(i) whether or not our paper addresses and satisfies the specifications (see ``Within Scope'' column),
(ii) any potential privacy concerns that may arise from satisfying the specification of the Topic
(iii) a brief high-level proposals for any privacy concerns that do arise.

The following table conists of Topics that we either directly tackle in our proof-of-concept, or are actively working on. 

\footnotesize
\begin{longtable}{|c|p{0.2\textwidth}|p{0.15\textwidth}|p{0.07\textwidth}|p{0.2\textwidth}|p{0.07\textwidth}|p{0.2\textwidth}|}
\hline
\textbf{Topic} & \textbf{Summary} & \textbf{Comments} & \textbf{Within Scope} & \textbf{Paper Notes} & \textbf{Privacy Concerns?} & \textbf{Privacy Notes} \\
\hline
\endhead

% WTE = wallet trust evidence -- certificate for the wallet itself (e.g. Google Wallet) to show that it is trusted. this is extra metadata that could potentially lead to linkability  

1 & Device binding and remote flows, according to [OpenID4VP] standard & Some of the points (e.g. verifying relying party identity, UX flows for which credential to present) are not strictly covered within our flow & Yes & Device binding: we propose that WSCA signature of nonce should be checked against pk of credential PRIVATELY in-circuit (otherwise reveals pk → linkability). Relying party verifying PID/QEAA signatures from trust list: can check issuer pk from list while hiding issuer signature check PRIVATELY in-circuit & Yes & We would propose merkle inclusion proof to hide the specific issuer pk (in case that issuer has only issued a few credentials), but would rely on external trusted maintenance/agreement of the merkle tree. This may not strictly align with "validate signature using trust list". \\
\hline

2 & Wallet must support mDLs & & Yes & Must support mDLs (specified in [ISO/IEC 18013-5]). \href{https://github.com/microsoft/crescent-credentials}{Crescent} already supports mDLs CBOR parsing & Maybe & \\
\hline

7 & Only issuers can revoke, using an "attestation status/revocation list mechanism", that relying parties also use & Either short term credentials, have an attestation status (e.g. suspension) list mechanism, or attestation revocation list mechanism & Ongoing work & Prover needs to provide some kind of proof of non-revocation. We propose providing merkle inclusion proof of a public online list & Yes & Without attestation lists being public, would either i) need to phone home to issuer to see the status of credential/obtain a proof → issuer surveillance, or ii) provide an ID the relying party can check against a public list → linkability \\
\hline

10 & Wallets must support proximity and remote [OpenID4VP] flows. Wallets must support mDLs and SD-JWTs. UX flow around user accepting newly issued PID/attestation & & Yes & Again must support mDLs (specified in [ISO/IEC 18013-5]). \href{https://github.com/microsoft/crescent-credentials}{Crescent} already supports mDLs CBOR parsing & & \\
\hline

11 & Pseudonyms issued by a pseudonym provider. Allows relying party to recognize users across presentations & & Yes & To eliminate need for an external pseudonym provider + allow for multiple pseudonyms controlled by the user: we propose computing/outputting a deterministic nullifier hash H(public\_key, random\_salt) (where the wallet stores the random\_salt) in-circuit, to use as the pseudonym & Yes & If pseudonym provider is issuer, this is really bad (can track full identity whenever issuer-assigned pseudonym used). If pseudonym provider is an external party, perhaps need some kind of id disclosure to get a pseudonym → similar to issuer tracking \\
\hline

17 & Ensuring users with multiple accounts/credential signins are actually the same person — requesting linking IDs & & Yes & Credentials should be re-randomized always & Yes & "Request the identified EUDI Wallet User to identify with another eID means which is accepted by the Relying Party so to link the data received from the EUDI Wallet with the account to which the User proved to have access to" → further supports need for efficient re-randomization \\
\hline

18 & User presenting info/proofs across multiple credentials. Shall request proof-of-association of PKs each credential is issued to from the WCSA/WCSD & Here is a potential \href{https://eprint.iacr.org/2024/1444.pdf}{Schnorr-style ZKP for association between PKs}. Main idea: proof of knowledge of dlog relationship btw the two & Yes & Proof-of-association should not have PKs in plaintext to the verifier (otherwise provides linkability). Need wallet user to do process proof received directly from WSCA. We propose an in-circuit verification of the ZKP received from WSCA (as a recursive proof) + matching of PKs to the ones in the credential & Yes & <<<< \\
\hline

29 & Should allow for issuance of eIDs that let someone represent someone else. Not speced out yet, ad-hoc & Unclear & Potential future work & We propose including both entities' PKs in the credential where transaction log would show up in represented person's as well. Maybe phone home to person being represented is OK? & Maybe & <<<< \\
\hline

35 & Protocol for PID issuance & Yes & Yes & See privacy concerns around wallet user providing WTE for PID/attestation issuer to verify before credential issuance & Yes & In the cases that the issuer is just another verifier or EUDI wallet instance (user) — want WTE verification to be private (especially for credential issuances that don't require sensitive info/verification) for unlinkability \\
\hline

38 & Need to ensure use of Wallet Instance Attestations (WIA) to relying parties does not allow tracking. Wallets must revoke/suspend when PID issuer asks & & Yes & & Yes & If WIAs are a separate list and just a static watermark, then can do merkle inclusion proof for unlinkability. We recommend against publishing list of public keys as a WIA mechanism — since this causes device-binding to function as doxxing (can check signatures against each of the potential public keys) \\
\hline


\hline


\end{longtable}

For the following Topics in the EUDI ARF, we assume the underlying architecture that the Topic addresses already satisfies the requirements, so that one can add our zkID solution as the credential presentation flow layer on top. We still provide comments, including notes about potential privacy concerns we have about the specification.  

This firsts table presents the Topics that we believe present the most major privacy concerns, and we provide comments on what the threats are.

\footnotesize
\begin{longtable}{|c|p{0.25\textwidth}|p{0.25\textwidth}|p{0.07\textwidth}|p{0.33\textwidth}|}
\hline
\textbf{Topic} & \textbf{Summary} & \textbf{Comments} & \textbf{Privacy Issues} & \textbf{Privacy Notes} \\
\hline
\endhead
9 & Wallet provider provides WTE certificate to wallet instances (testifying security of WSCA/D), wallet gives new PK and proof-of-association with WTE key to issuers to receive credentials to & Wallet provider responsibility, WTE is never shown to relying parties (see Topic 18 for proof-of-association sent to relying parties) & Yes & Potential issuer collusion allows for reconstruction of a superset of IDs if WTE is provided in plain. Proof-of-association with keys should also be private/in-circuit if possible \\
\hline

19 & Must have overview of all transactions executed through the Wallet Instance that cannot be deleted... & & Yes & Need to ensure this is hidden behind some kind of biometric authentication within the wallet, so that cannot be accessed if stolen. Access to this data allows linkage everywhere. Definitely should not be external \\
\hline

33 & Backup devices (e.g. HSM backups) & & Yes & How do HSM backups work? How to ensure they are secure so that credentials aren't stolen. In the process of backing up, must transfer some sensitive information (e.g. entire credential) \\
\hline

\end{longtable}

This second table presents the remaining Topics, with comments on why the topic lies within a separate layer from our zkID presentation flow.

\footnotesize
\begin{longtable}{|c|p{0.25\textwidth}|p{0.25\textwidth}|p{0.07\textwidth}|p{0.33\textwidth}|}
\hline
\textbf{Topic} & \textbf{Summary} & \textbf{Comments} & \textbf{Privacy Issues} & \textbf{Privacy Notes} \\
\hline
\endhead

3 & \href{https://eu-
digital-identity-
wallet.github.io/eudi-
doc-architecture-
and-reference-
framework/1.4.0/annexes/annex-
3/annex-3.01-pid-
rulebook/}{PID rulebook} & Issuer responsibility & No & \\
\hline

4 & \href{https://eu-digital-identity-wallet.github.io/eudi-doc-architecture-and-reference-framework/latest/annexes/annex-3/annex-3.02-mDL-rulebook/}{mDL rulebook} & Issuer responsibility & No & \\
\hline

6 & Relying party authentication & User checks relying party ID and certificates, e.g. signature checks & & \\
\hline

12 & Should standardize attribute identifiers/syntaxes across namespaces and attestation types for max interoperability & Issuer responsibility / for verifier request convenience. But also somewhat for user legibility/transparency & No & \\
\hline

16 & Wallet should allow user to create (qualified electronic) signatures over documents & & No & \\
\hline

24 & UX flows for proximity (e.g. mDL) - including user approval for disclosure & Just UX layer & No & \\
\hline

25 & Similar to topic 12, standardizing vocab for attestation attributes & Issuer responsibility & No & \\
\hline

26 & For these standards, anyone can contribute, just be reasonable & Issuer/standards responsibility & No & \\
\hline

27 & Relying party should get certificates to be verified by the wallet user before disclosure & Relying party + trusted anchor responsibility & No & \\
\hline

28 & Wallet for legal person (e.g. corps, governments, and NGOs) should be diff from natural person (human) & Issuer responsibility & No & \\
\hline

30 & Wallet user can also be verifier & Introduces no new requirements for presentation flow & No & \\
\hline

31 & Public, no-auth trusted list of certificate issuers (for issuers, wallet providers, and relying parties) & Nothing concerning! Public list is good & No & \\
\hline

42 & Qualified trust service providers (qtsps)(issuers of QEAA attestation types) need access to authentic sources (e.g. databases of legal citizens) & & No & \\
\hline

43 & Policy for which items to be disclosed in certain presentation situations & Needs to be built into the frontend logic before circuit proofs on the user side. & Maybe & Only if some metadata about Wallet (that would provide linkability) can be tracked when requesting info from relying party... \\
\hline

48 & Users being able to delete presented data to verifiers & & No & Good for privacy! \\
\hline

50 & Protocols for reporting relying party abuse & [?] Isn't relying party certificate + checking against trusted anchor list enough? & No & \\
\hline

\end{longtable}


Finally, the following topics had no high-level requirements (as of July 2025), or their high-level requirements are already contained in other Topics:

\footnotesize
\begin{longtable}{|c|p{0.8\textwidth}|}
\hline
\textbf{Topic} & \textbf{Topic name} \\
\hline
\endhead

5 & EUDI Wallet Design Guide \\
\hline

8 & Design Solutions on Data Sharing scenarios \\
\hline

13 & Developing an EUDI Wallet Architecture Based on Secure Element \\
\hline

14 & Developing an EUDI Wallet Architecture Based on External Token \\
\hline

15 & Developing an EUDI Wallet Architecture Based on Remote HSM \\
\hline

20 & Strong User (Customer) Authentication in the context of electronic payments \\
\hline

21 & Diplomas with EUDI Wallet \\
\hline

22 & Digital Travel Credentials with EUDI Wallet \\
\hline

23 & PID issuance and (Q)EAA issuance \\
\hline

32 & PID interoperability \\
\hline

34 & Migrate to a different wallet solution \\
\hline

36 & Risk Analysis of the EUDI Wallet Usage \\
\hline

37 & QES — Remote Signing — Technical Requirements \\
\hline

39 & Wallet to wallet technical Topic \\
\hline

40 & Reserved \\
\hline

41 & Minimum requirements on PuB-EAAs rulebooks \\
\hline

44 & QEAA evaluation requirements \\
\hline

45 & QEAA Rulebook \\
\hline

46 & Protocols and interfaces for Presentation of PID and (Q)EAA with relying parties \\
\hline

47 & Protocols and interfaces for PID and (Q)EAA issuance, and (non-)qualified certificates issuance \\
\hline

49 & Protocol and interfaces for requesting data deletion to relying parties \\
\hline

\end{longtable}


